{"version":3,"sources":["firebase/config.js","firebase/index.js","components/Navbar.js","Login.js","Home.js","Upload.js","Account.js","components/UploadList.js","components/DownloadList.js","Storage.js","Shop.js","ProductDetail.js","Buy.js","App.js","index.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","apps","length","initializeApp","auth","store","storage","db","database","Navbar","className","Login","history","useHistory","useState","email","passowrd","state","setState","onChange","e","target","name","value","useEffect","onAuthStateChanged","currentUser","replace","onSubmit","preventDefault","password","signInWithEmailAndPassword","then","response","catch","error","alert","type","Home","to","style","textDecoration","color","Upload","subject_code","setSubjectCode","subject_name","setSubjectName","file","setFile","a","file_ref","ref","uid","child","put","getDownloadURL","url","console","log","set","link","id","event","_file","files","onClick","Profile","qr_bank","user","setUser","once","snapshot","val","localStorage","setItem","signOut","UploadList","authCode","Subjectname","uploadList","setUploadList","fetchUpload","getItem","on","data","Object","keys","subjectname","map","key","index","window","location","href","DownloadList","list","downloadList","setDownloadList","fetchDownload","values","Storage","Shop","alldata","setAlldata","fetchData","ProductID","ProductDetail","productID","useParams","productId","subjectCode","detail","setDetail","fetchDetail","fetchUser","prevDetail","author","goBuy","Buy","App","currentAccount","exact","path","component","Account","_Storage","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.713e08a8.chunk.js","sourcesContent":["const config = {\n    apiKey: \"AIzaSyDIHoMTpMPyuIDGIp6yl_f08kLOeRsW86w\",\n    authDomain: \"test-predev.firebaseapp.com\",\n    databaseURL: \"https://test-predev.firebaseio.com\",\n    projectId: \"test-predev\",\n    storageBucket: \"test-predev.appspot.com\",\n    messagingSenderId: \"749797199963\",\n    appId: \"1:749797199963:web:aa171e596059a636722f7e\"\n}\n\nexport default config","import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport config from './config'\nimport 'firebase/storage'\nimport 'firebase/database'\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(config)\n}\n\nexport const auth = firebase.auth()\nexport const store = firebase.storage()\nexport const db = firebase.database()","import React from 'react';\n\nfunction Navbar(){\n    return(\n        <div>\n            <header className=\"Navbar\">\n                <body className=\"Head\">\n                    PAPOY\n                </body>\n            </header>\n        </div>\n    );\n}\nexport default Navbar;","import React, { useEffect, useState } from 'react';\nimport {auth} from './firebase'\nimport { useHistory } from 'react-router-dom';\nimport Navbar from './components/Navbar'\n\n\nconst Login = () => {\n  const history = useHistory()\n  const [state, setState] = useState({\n    email: '',\n    passowrd: ''\n  })\n\n  const onChange = e => {\n    const { name, value } = e.target\n    setState({\n      ...state,\n      [name]: value\n    })\n  }\n\n  const onSubmit = e => {\n    e.preventDefault()\n\n    const { email, password } = state\n    auth.signInWithEmailAndPassword(email, password)\n      .then(response => {\n        history.replace('/account')\n      })\n      .catch(error => {\n        alert('Error in login', error)\n      })\n  }\n\n  useEffect(()=>{\n    auth.onAuthStateChanged(function(currentUser) {\n      if (currentUser) {\n        history.replace('/account')\n      }\n    })\n  })\n\n  return (\n    <div>\n      <Navbar />\n      <form onSubmit={onSubmit}>\n        <p> login  </p>\n        <p> Email <input\n          type=\"email\"\n          name=\"email\"\n          onChange={onChange}\n        />    </p>\n\n        <p> Password <input\n          type=\"password\"\n          name=\"password\"\n          onChange={onChange}\n        />  </p>\n\n        <p></p>\n        <button type='submit'>LOGIN</button>\n      </form>\n\n    </div>\n\n  );\n\n}\n\nexport default Login;","import React from 'react'\nimport Navbar from './components/Navbar'\nimport { Link } from 'react-router-dom'\n\n\nexport default function Home() {\n    return (\n        <div>\n            <Navbar />\n            <body className=\"body\">\n                <button type='button' className=\"button1\">\n                    <Link to=\"/login\" style={{textDecoration: \"none\", color: \"white\"}}>LOGIN</Link>\n                </button>\n                \n                <p></p>\n                <button type='button' className=\"button1\">SUBMIT</button>\n            </body>\n        </div>\n    )\n}\n","import React from 'react'\nimport { auth, db, store} from './firebase'\nimport Navbar from './components/Navbar'\nimport { useHistory } from 'react-router-dom'\nimport { useState } from 'react'\n\nconst Upload = () => {\n    const[subject_code,setSubjectCode] = useState(null)\n    const[subject_name,setSubjectName] = useState()\n    const subjectCode =(e)=>{\n        setSubjectCode(e.target.value)\n    }\n    const subjectName =(e)=>{\n        setSubjectName(e.target.value)\n    }\n    const [file,setFile] = useState(null)\n    const history = useHistory()\n    const Choose = event => {\n        const _file = event.target.files[0]\n        if(_file!==null){\n            setFile(_file)\n        }\n    }\n\n    async function Upload() {\n        const file_ref = store.ref(auth.currentUser.uid).child(file.name)\n        await file_ref.put(file)\n        const url = await file_ref.getDownloadURL()\n        console.log(url)\n        console.log(subject_code)\n        await db.ref(`/users/${auth.currentUser.uid}/upload/${subject_code}`).set({\n            link: url,\n            name: subject_name\n        })\n        await db.ref(`/file/${subject_code}`).set({\n            link: url,\n            uid: auth.currentUser.uid,\n            name: subject_name\n        })\n        alert('Upload Success')\n    }\n\n    const Back =()=>{\n        history.replace('/account')\n    }\n\n\n    return(\n        <div>\n            <Navbar/>\n            <p>subject Code</p>\n            <input type='text' onChange={subjectCode} ></input>\n            <br></br>\n            <p>subject name</p>\n            <input type='text' onChange={subjectName} ></input>\n            <br></br><br></br>\n            <input type=\"file\" id=\"file_choose\" onChange={Choose}/>\n            <br></br><br></br>\n            <button id=\"file_upload\" onClick={Upload} >UPLOAD</button>\n            <p>                 </p>\n            <button onClick={Back}>Back</button>\n        </div>\n    )\n}\n\nexport default Upload","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { auth, db} from './firebase'\nimport Navbar from './components/Navbar'\n\nconst Profile = () => {\n    const [user,setUser] = useState({\n        name:'',\n        email:'',\n        uid:'',\n        qr_bank:''\n    })\n    const history = useHistory()\n\n    useEffect(()=>{\n        auth.onAuthStateChanged(function(currentUser) {\n          if (currentUser) {\n            console.log(currentUser)\n            db.ref('/users/'+auth.currentUser.uid).once('value').then((snapshot)=>{\n                setUser({\n                    name: snapshot.val().name,\n                    qr_bank: snapshot.val().qr_bank,\n                    email: snapshot.val().email,\n                    uid: auth.currentUser.uid\n                })\n                localStorage.setItem('uid', auth.currentUser.uid)\n            })\n            }\n        })\n    },[auth])\n    function logout(){\n        auth.signOut()\n        history.replace('/')\n    }\n\n    function goUpload(){\n        history.replace('/account/upload')\n    }\n\n    function goStorage(){\n        history.replace('/account/storage')\n    }\n\n    function goShop(){\n        history.replace('/shop')\n    }\n\n    \n        return (\n            <div>\n                <Navbar />\n                <button onClick={logout}>LOGOUT</button>\n                <div>\n                    <p>uid : {user.uid}</p>\n                    <p>name : {user.name}</p>\n                    <p>email : {user.email}</p>\n                    <p>qr_bank : {user.qr_bank}</p>\n                </div>\n                <button onClick={goUpload}>UPLOAD</button>\n                <button onClick={goStorage}>STORAGE</button>\n                <button onClick={goShop}>SHOP</button>\n            </div>\n        )   \n}\n\n export default Profile","import React,{ useEffect, useState } from 'react'\nimport { auth, db} from './../firebase'\nimport './../App.css'\n\nfunction UploadList({authCode}){\n\n    const[uploadList,setUploadList] = useState({\n        subject_code:[],\n        link:[],\n        Subjectname:[],\n    })\n\n    const fetchUpload = async () => {\n        const uid = localStorage.getItem('uid')\n        db.ref(`/users/${uid}/upload/`).on('value', snapshot => {\n            const data = snapshot.val()\n            console.log(data)\n            if(data){\n                setUploadList({\n                subject_code: Object.keys(data),\n                link: data['link'],\n                subjectname: data['name'],\n                data: data\n                })\n            }\n        })\n    }\n\n    useEffect(()=> {\n        fetchUpload()\n    },db.ref(`/users/${localStorage.getItem('uid')}/upload/`))\n\n    return(\n        <div>\n            <p>Upload</p>\n            {uploadList.subject_code.map((key, index) => {\n        return ( \n        <li key={index}>{`subject code : ${key}`} Subject name : <p>{uploadList.data[key].name}</p>link : \n        <a className='download' onClick={() => window.location.href  = uploadList.data[key]['link']}>download</a>\n        </li>)\n        })\n\n            }   \n        </div>\n    )\n    \n}\n\nexport default UploadList","import React,{ useEffect, useState } from 'react'\nimport { auth, db} from './../firebase'\nimport './../App.css'\n\nfunction DownloadList(){\n\n    const[downloadList,setDownloadList] = useState({\n        subject_code:[],\n        link:[],\n        list:{}\n    })\n\n    const fetchDownload = async () => {\n         db.ref(`/users/${localStorage.getItem('uid')}/download/`).on('value', snapshot => {\n            const data = snapshot.val()\n            console.log(data)\n            if(data){\n                setDownloadList({\n                subject_code: Object.keys(data),\n                link: Object.values(data),\n                list: data\n                })\n            }\n        })\n    }\n\n    useEffect(()=> {\n        fetchDownload()\n    },db.ref(`/users/${localStorage.getItem('uid')}/download/`))\n\n    return(\n        <div>\n            <p>Download</p>\n            {downloadList.subject_code.map((key, index) => {\n                return ( \n                <li key={index}>{`subject code : ${key}`} link : \n                <a className='download' onClick={() => window.location.href  = downloadList.link[index]}>download</a>\n                </li>)\n                })\n            }   \n        </div>\n    )\n    \n}\n\nexport default DownloadList","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport './App.css'\nimport Upp from './components/UploadList'\nimport Dww from './components/DownloadList'\n\nconst Storage = () =>{\n\n   \n    const history = useHistory()\n    function goback(){\n        history.replace('/account')\n    }\n\n    return(\n        <div>\n            <Upp/>\n            <Dww/>\n            <button onClick={goback}>BACK</button>\n        </div>\n    )\n}\n\nexport default Storage","import React, { useEffect, useState } from 'react'\nimport Navbar from './components/Navbar';\nimport {auth, db, store} from './firebase'\nimport { Link, useHistory } from 'react-router-dom';\n\n\nconst Shop = () => {\n\n    const[alldata,setAlldata] = useState({\n        subject_code:[],\n        link:[],\n        subjectname:[],\n        data:{}\n    })\n\n    useEffect(()=>{\n        fetchData()\n    },db.ref('/users/'))\n\n    const fetchData = () => db.ref(`/file`).on('value', snapshot => {\n        const data = snapshot.val()\n        console.log(data)\n        if(data){\n            setAlldata({\n            subject_code: Object.keys(data),\n            link: data['link'],\n            subjectname: data['name'],\n            data: data\n            })\n        }\n    })\n\n    function toItem(ProductID){\n        history.replace(`/shop/${ProductID}`)\n    }\n\n    const history = useHistory()\n\n    function goBack(){\n        history.replace('/account')\n    }\n\n    function show(){\n        alldata.subject_code.map((key)=>{\n            console.log(key)\n            console.log(alldata.data[key].name)\n            console.log(alldata.data[key].link)\n        })\n    }\n    return (\n        <div>\n            <Navbar/>\n            hello\n            <button onClick={goBack}>back</button>\n            <button onClick={show}>show</button>\n            {alldata.subject_code.map((key)=>{\n                {console.log(key)}\n            return(\n                \n            <li>{`subject code : ${key}`} {`subject name : ${alldata.data[key].name}`} \n            <a className='download' onClick={() => toItem(key)}>detail</a></li>\n            )\n        })}\n        </div>\n\n        \n        \n    )\n}\nexport default Shop","import React, { useState, useEffect } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport Navbar from './components/Navbar'\nimport { auth, store, db } from './firebase'\n\nconst ProductDetail = () => {\n\n    const params = useParams()\n    const productID = params.productId\n\n    const history = useHistory()\n\n    const[detail,setDetail] = useState({\n        name: '',\n        subjectCode: '',\n        uid: '',\n        link: '',\n    })\n\n    const fetchDetail = async () => {\n        db.ref(`/file/${productID}`).once('value', snapshot => {\n            const data = snapshot.val()\n            console.log(snapshot)\n            // console.log(data)\n            if(data){\n                setDetail({\n                    name: data.name,\n                    subjectCode: snapshot.key,\n                    uid: data.uid,\n                    link: data.link\n                })\n                console.log(detail.uid)\n                fetchUser(data.uid)\n            }\n        })\n    }\n\n    const fetchUser = (uid) =>{\n        db.ref(`/users/${uid}`).on('value', snapshot => {\n            const data = snapshot.val()\n            console.log(data)\n            if(data){\n                setDetail(prevDetail => ({\n                    ...prevDetail,\n                    author: data.name\n                }))\n            }\n        })\n    }\n\n    useEffect(()=> {\n        fetchDetail()\n        //fetchUser()\n    },[])\n\n    function goBack(){\n        history.replace('/shop')\n    }\n\n    function goBuy(productID){\n        history.replace(`/shop/${productID}/buy`)\n    }\n\n    //console.log(detail.name+':'+detail.subjectCode+':'+detail.uid+':'+detail.link)\n\n    return(\n        <div>\n            <Navbar/>\n            <p>Subject code {productID} </p>\n            <p>Subject name {detail.name}</p>\n            <p>Author {detail.author}</p>\n            <br></br>\n            <button onClick={goBack}>BACK</button>\n            <button onClick={() => goBuy(productID)}>BUY</button>\n        </div>\n    )\n\n}\n\nexport default ProductDetail","import React from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { auth, db, store } from './firebase'\n\nconst Buy = () =>{\n\n    const param = useParams()\n    const productID = param.productId\n    console.log(\"pro = \"+ productID)\n    return(\n        <div>\n            Buy\n        </div>\n    )\n}\n\nexport default Buy","import React, { useEffect } from 'react'\nimport './App.css';\nimport {\n  Switch,\n  Route,\n  useHistory\n} from \"react-router-dom\"\nimport Login from './Login'\nimport Home from './Home'\nimport Upload from './Upload'\nimport Account from './Account'\nimport _Storage from './Storage'\nimport Shop from './Shop'\nimport ProductDetail from './ProductDetail'\nimport Buy from './Buy'\nimport { auth } from './firebase'\n\n\nfunction App (){\n  const history = useHistory()\n\n  useEffect(()=>{\n    auth.onAuthStateChanged(function(currentAccount) {\n      if (!currentAccount) {\n        history.replace('/')\n      }\n    })\n  })\n\n  return (\n    <div>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/login\" component={Login} />\n          <Route exact path=\"/account\" component={Account} />\n          <Route path=\"/account/upload\" component={Upload} />\n          <Route path=\"/account/storage\" component={_Storage} />\n          <Route exact path=\"/shop\" component={Shop} /> \n          <Route exact path=\"/shop/:productId\" component={ProductDetail} /> \n          <Route path=\"/shop/:productId/buy\" component={Buy} />\n        </Switch>        \n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {  BrowserRouter as Router, } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router >\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}